# å—æ³¨ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ  (Order Management System)

ãƒ¢ãƒ€ãƒ³ãª React/Next.js ã§æ§‹ç¯‰ã•ã‚ŒãŸå—æ³¨ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚å¾—æ„å…ˆç®¡ç†ã€å•†å“ç®¡ç†ã€å—æ³¨ç®¡ç†ã® 3 ã¤ã®ãƒã‚¹ã‚¿ãƒ¼ã‚’æ‰±ã„ã¾ã™ã€‚

## ğŸš€ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

- **Next.js 16.1.1** (App Router + Turbopack)
- **React 19.2.3**
- **TypeScript**
- **Tailwind CSS 3.x**
- **shadcn/ui** - ãƒ¢ãƒ€ãƒ³ãª UI ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- **lucide-react** - ã‚¢ã‚¤ã‚³ãƒ³

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰

- **Next.js Server Actions** - API-less ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
- **Prisma 5.22.0** - ORM
- **SQLite** - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ (better-sqlite3)
- **NextAuth.js 5.0.0-beta.30** - èªè¨¼ãƒ»èªå¯

### ãƒ•ã‚©ãƒ¼ãƒ ãƒ»ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

- **React Hook Form** - ãƒ•ã‚©ãƒ¼ãƒ ç®¡ç†
- **Zod** - ã‚¹ã‚­ãƒ¼ãƒãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

## âœ¨ ä¸»ãªæ©Ÿèƒ½

### ğŸ¢ å¾—æ„å…ˆç®¡ç†

- å¾—æ„å…ˆã®ç™»éŒ²ãƒ»ç·¨é›†ãƒ»å‰Šé™¤
- å¾—æ„å…ˆåãƒ»é›»è©±ç•ªå·ã§ã®æ¤œç´¢
- ãƒšãƒ¼ã‚¸ãƒ³ã‚°å¯¾å¿œï¼ˆ10 ä»¶/ãƒšãƒ¼ã‚¸ï¼‰
- ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½ï¼ˆå¾—æ„å…ˆåã€é›»è©±ç•ªå·ï¼‰

### ğŸ“¦ å•†å“ç®¡ç†

- å•†å“ã®ç™»éŒ²ãƒ»ç·¨é›†ãƒ»å‰Šé™¤
- å•†å“ã‚³ãƒ¼ãƒ‰ï¼ˆäººé–“ãŒæ¡ç•ªï¼‰ã«ã‚ˆã‚‹ç®¡ç†
- å•†å“ã‚³ãƒ¼ãƒ‰ãƒ»å•†å“åã§ã®æ¤œç´¢
- ãƒšãƒ¼ã‚¸ãƒ³ã‚°å¯¾å¿œï¼ˆ10 ä»¶/ãƒšãƒ¼ã‚¸ï¼‰
- ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½ï¼ˆå•†å“ã‚³ãƒ¼ãƒ‰ã€å•†å“åã€å˜ä¾¡ï¼‰

### ğŸ“‹ å—æ³¨ç®¡ç†

- å—æ³¨ã®ç™»éŒ²ãƒ»ç·¨é›†ãƒ»å‰Šé™¤
- å¾—æ„å…ˆã‚µã‚¸ã‚§ã‚¹ãƒˆå…¥åŠ›
- å•†å“ã‚µã‚¸ã‚§ã‚¹ãƒˆå…¥åŠ›ï¼ˆã‚³ãƒ¼ãƒ‰ãƒ»åç§°ä¸¡å¯¾å¿œï¼‰
- æ˜ç´°ã®å‹•çš„è¿½åŠ ãƒ»å‰Šé™¤
- è‡ªå‹•è¨ˆç®—ï¼ˆé‡‘é¡ã€åˆè¨ˆé‡‘é¡ï¼‰
- å—æ³¨æ—¥ç¯„å›²æ¤œç´¢
- å¾—æ„å…ˆåã§ã®çµã‚Šè¾¼ã¿
- ãƒšãƒ¼ã‚¸ãƒ³ã‚°å¯¾å¿œï¼ˆ10 ä»¶/ãƒšãƒ¼ã‚¸ï¼‰
- ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½ï¼ˆå—æ³¨æ—¥ã€å¾—æ„å…ˆåã€åˆè¨ˆé‡‘é¡ï¼‰

### ğŸ” èªè¨¼ãƒ»èªå¯

- ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½ï¼ˆNextAuth.js v5ï¼‰
- ãƒ­ãƒ¼ãƒ«åŸºã¥ãã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡
  - **Administrator**: å…¨æ©Ÿèƒ½åˆ©ç”¨å¯èƒ½
  - **User**: é–²è¦§ã®ã¿
- ãƒ†ã‚¹ãƒˆãƒ­ã‚°ã‚¤ãƒ³ãƒœã‚¿ãƒ³ï¼ˆé–‹ç™ºç”¨ï¼‰

### ğŸ¨ UI/UX

- ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³
- ãƒ¢ãƒ€ãƒ³ãªã‚«ãƒ©ãƒ¼ã‚¹ã‚­ãƒ¼ãƒ ï¼ˆæ©Ÿèƒ½ã”ã¨ã®ãƒ†ãƒ¼ãƒã‚«ãƒ©ãƒ¼ï¼‰
  - å¾—æ„å…ˆ: ã‚¨ãƒ¡ãƒ©ãƒ«ãƒ‰ã‚°ãƒªãƒ¼ãƒ³
  - å•†å“: ãƒ‘ãƒ¼ãƒ—ãƒ«
  - å—æ³¨: ãƒ–ãƒ«ãƒ¼
- ãƒˆãƒ¼ã‚¹ãƒˆé€šçŸ¥ï¼ˆæˆåŠŸãƒ»ã‚¨ãƒ©ãƒ¼ï¼‰
- ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¹ã‚±ãƒ«ãƒˆãƒ³
- ã‚¨ãƒ©ãƒ¼ãƒã‚¦ãƒ³ãƒ€ãƒªãƒ¼

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
orderapp/
â”œâ”€â”€ prisma/
â”‚   â””â”€â”€ schema.prisma          # Prismaã‚¹ã‚­ãƒ¼ãƒ
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ actions/               # Server Actions
â”‚   â”‚   â”œâ”€â”€ customers.ts
â”‚   â”‚   â”œâ”€â”€ orders.ts
â”‚   â”‚   â””â”€â”€ products.ts
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ (protected)/       # èªè¨¼ãŒå¿…è¦ãªãƒšãƒ¼ã‚¸
â”‚   â”‚   â”‚   â”œâ”€â”€ customers/     # å¾—æ„å…ˆç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ orders/        # å—æ³¨ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ products/      # å•†å“ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ layout.tsx
â”‚   â”‚   â”œâ”€â”€ api/auth/          # NextAuth APIãƒ«ãƒ¼ãƒˆ
â”‚   â”‚   â”œâ”€â”€ login/             # ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸
â”‚   â”‚   â”œâ”€â”€ globals.css
â”‚   â”‚   â”œâ”€â”€ layout.tsx
â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”œâ”€â”€ components/            # å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ ui/                # shadcn/uiã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ AuthGuard.tsx
â”‚   â”‚   â”œâ”€â”€ DataTable.tsx      # æ±ç”¨ãƒ†ãƒ¼ãƒ–ãƒ«
â”‚   â”‚   â”œâ”€â”€ KeywordSearchForm.tsx
â”‚   â”‚   â”œâ”€â”€ Layout.tsx
â”‚   â”‚   â”œâ”€â”€ ListErrorBoundary.tsx
â”‚   â”‚   â”œâ”€â”€ ListLoadingSkeleton.tsx
â”‚   â”‚   â”œâ”€â”€ Pagination.tsx
â”‚   â”‚   â””â”€â”€ SuggestTextBox.tsx # ã‚µã‚¸ã‚§ã‚¹ãƒˆå…¥åŠ›
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â””â”€â”€ use-toast.ts
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ repositories/      # ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹å±¤
â”‚   â”‚   â”‚   â”œâ”€â”€ customerRepository.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ orderRepository.ts
â”‚   â”‚   â”‚   â””â”€â”€ productRepository.ts
â”‚   â”‚   â”œâ”€â”€ auth.ts            # NextAuthè¨­å®š
â”‚   â”‚   â”œâ”€â”€ prisma.ts          # Prismaã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ serverActionHelpers.ts # å…±é€šãƒ˜ãƒ«ãƒ‘ãƒ¼
â”‚   â”‚   â””â”€â”€ utils.ts
â”‚   â”œâ”€â”€ scripts/
â”‚   â”‚   â””â”€â”€ init-db.ts         # DBåˆæœŸåŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ next-auth.d.ts
â”‚   â”‚   â””â”€â”€ pagination.ts
â”‚   â””â”€â”€ middleware.ts          # èªè¨¼ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢
â”œâ”€â”€ .env                       # ç’°å¢ƒå¤‰æ•°
â”œâ”€â”€ .env.local                 # ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒå¤‰æ•°
â”œâ”€â”€ components.json            # shadcn/uiè¨­å®š
â”œâ”€â”€ next.config.ts
â”œâ”€â”€ package.json
â”œâ”€â”€ tailwind.config.ts
â””â”€â”€ tsconfig.json
```

## ğŸ› ï¸ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### å‰ææ¡ä»¶

- Node.js 18.x ä»¥ä¸Š
- npm ã¾ãŸã¯ yarn

### 1. ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³

```bash
git clone <repository-url>
cd orderapp
```

### 2. ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
npm install
```

### 3. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

`.env`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆï¼š

```env
DATABASE_URL="file:./orderapp.db"
AUTH_SECRET="your-secret-key-here"  # æœ¬ç•ªç’°å¢ƒã§ã¯å®‰å…¨ãªã‚­ãƒ¼ã‚’ç”Ÿæˆ
NEXTAUTH_URL="http://localhost:3000"
```

**AUTH_SECRET ã®ç”Ÿæˆæ–¹æ³•:**

```bash
openssl rand -base64 32
```

### 4. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®åˆæœŸåŒ–

```bash
# Prisma Clientã®ç”Ÿæˆ
npx prisma generate

# åˆæœŸãƒ‡ãƒ¼ã‚¿ã®æŠ•å…¥
npm run db:init
```

**åˆæœŸãƒ‡ãƒ¼ã‚¿:**

- ãƒ¦ãƒ¼ã‚¶ãƒ¼: `admin` / `admin123` (Administrator)
- ãƒ¦ãƒ¼ã‚¶ãƒ¼: `user` / `user123` (User)
- ã‚µãƒ³ãƒ—ãƒ«å¾—æ„å…ˆ 3 ä»¶
- ã‚µãƒ³ãƒ—ãƒ«å•†å“ 21 ä»¶ï¼ˆã‚¬ãƒ³ãƒ€ãƒ ã‚·ãƒªãƒ¼ã‚ºã®ãƒ¢ãƒ“ãƒ«ã‚¹ãƒ¼ãƒ„ï¼‰

### 5. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•

```bash
npm run dev
```

http://localhost:3000 ã§ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½

## ğŸ“ åˆ©ç”¨å¯èƒ½ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆ

```bash
npm run dev          # é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
npm run build        # æœ¬ç•ªãƒ“ãƒ«ãƒ‰
npm run start        # æœ¬ç•ªã‚µãƒ¼ãƒãƒ¼èµ·å‹•
npm run lint         # ESLintãƒã‚§ãƒƒã‚¯
npm run db:init      # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–
npx prisma studio    # Prisma Studioèµ·å‹•ï¼ˆDB GUIï¼‰
```

## ğŸ”‘ ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼

| ãƒ¦ãƒ¼ã‚¶ãƒ¼å | ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ | ãƒ­ãƒ¼ãƒ«        | æ¨©é™                       |
| ---------- | ---------- | ------------- | -------------------------- |
| admin      | admin123   | Administrator | å…¨æ©Ÿèƒ½ï¼ˆç™»éŒ²ãƒ»ç·¨é›†ãƒ»å‰Šé™¤ï¼‰ |
| user       | user123    | User          | é–²è¦§ã®ã¿                   |

## ğŸ—„ï¸ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹é€ 

### ãƒ†ãƒ¼ãƒ–ãƒ«ä¸€è¦§

#### usersï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰

- `user_id` (PK, AUTOINCREMENT)
- `username` (UNIQUE)
- `password_hash`
- `role` (Administrator / User)
- `created_at`
- `updated_at`

#### customersï¼ˆå¾—æ„å…ˆãƒã‚¹ã‚¿ãƒ¼ï¼‰

- `customer_id` (PK, AUTOINCREMENT)
- `customer_name`
- `phone_number`
- `version` (æ¥½è¦³çš„æ’ä»–åˆ¶å¾¡ç”¨)
- `created_at`
- `updated_at`

#### productsï¼ˆå•†å“ãƒã‚¹ã‚¿ãƒ¼ï¼‰

- `product_code` (PK, TEXT) â€»äººé–“ãŒæ¡ç•ª
- `product_name`
- `unit_price`
- `version` (æ¥½è¦³çš„æ’ä»–åˆ¶å¾¡ç”¨)
- `created_at`
- `updated_at`

#### ordersï¼ˆå—æ³¨ï¼‰

- `order_id` (PK, AUTOINCREMENT)
- `customer_id` (ç„¼ãä»˜ã‘ã€FK åˆ¶ç´„ãªã—)
- `customer_name` (ç„¼ãä»˜ã‘)
- `order_date`
- `total_amount`
- `version` (æ¥½è¦³çš„æ’ä»–åˆ¶å¾¡ç”¨)
- `created_by`
- `created_at`
- `updated_at`

#### order_detailsï¼ˆå—æ³¨æ˜ç´°ï¼‰

- `detail_id` (PK, AUTOINCREMENT)
- `order_id` (FK â†’ orders, CASCADE å‰Šé™¤)
- `product_code` (ç„¼ãä»˜ã‘ã€FK åˆ¶ç´„ãªã—)
- `product_name` (ç„¼ãä»˜ã‘)
- `quantity`
- `unit_price` (ç„¼ãä»˜ã‘)
- `amount` (è¨ˆç®—çµæœ)

## ğŸ¯ ä¸»è¦ãªè¨­è¨ˆæ±ºå®š

### 1. **API-less ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**

- å¾“æ¥ã® `/api` ãƒ«ãƒ¼ãƒˆã§ã¯ãªãã€Server Actions ã‚’ä½¿ç”¨
- ã‚³ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³å‘ä¸Šã€å‹å®‰å…¨æ€§ã®å¼·åŒ–

### 2. **ãƒ‡ãƒ¼ã‚¿ç„¼ãä»˜ã‘æ–¹å¼**

- å—æ³¨ãƒ†ãƒ¼ãƒ–ãƒ«ã«å¾—æ„å…ˆåã‚’ç„¼ãä»˜ã‘
- å—æ³¨æ˜ç´°ãƒ†ãƒ¼ãƒ–ãƒ«ã«å•†å“åãƒ»å˜ä¾¡ã‚’ç„¼ãä»˜ã‘
- ãƒã‚¹ã‚¿ãƒ¼ã¸ã®å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„ãªã—
- å±¥æ­´ãƒ‡ãƒ¼ã‚¿ã®ä¿å…¨ã‚’é‡è¦–

### 3. **æ¥½è¦³çš„æ’ä»–åˆ¶å¾¡**

- å…¨ãƒã‚¹ã‚¿ãƒ¼ãƒ†ãƒ¼ãƒ–ãƒ«ã«`version`ã‚«ãƒ©ãƒ 
- æ›´æ–°æ™‚ã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒã‚§ãƒƒã‚¯
- åŒæ™‚æ›´æ–°ã®æ¤œå‡ºã¨ã‚¨ãƒ©ãƒ¼é€šçŸ¥

### 4. **Repository ãƒ‘ã‚¿ãƒ¼ãƒ³**

- ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹å±¤ã‚’åˆ†é›¢
- ãƒ†ã‚¹ã‚¿ãƒ“ãƒªãƒ†ã‚£ã®å‘ä¸Š
- ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã¨ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ã®åˆ†é›¢

### 5. **å…±é€šåŒ–ã®å¾¹åº•**

- `DataTable` - æ±ç”¨ãƒ†ãƒ¼ãƒ–ãƒ«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- `serverActionHelpers` - èªè¨¼ãƒ»CRUDãƒ»ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®å…±é€šåŒ–
- `ListLoadingSkeleton`, `ListErrorBoundary` - UI çŠ¶æ…‹ã®å…±é€šåŒ–

### 6. **shadcn/ui ã®æ¡ç”¨**

- ã‚³ãƒ”ãƒ¼&ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- Tailwind CSS ãƒ™ãƒ¼ã‚¹
- é«˜ã„ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºæ€§

## ğŸ”„ é–‹ç™ºãƒ•ãƒ­ãƒ¼

### æ–°æ©Ÿèƒ½è¿½åŠ æ™‚ã®æ¨å¥¨æ‰‹é †

1. **å‹å®šç¾©ã®è¿½åŠ ** (`src/types/index.ts`)
2. **Prisma ã‚¹ã‚­ãƒ¼ãƒã®æ›´æ–°** (`prisma/schema.prisma`)
3. **Repository ã®ä½œæˆ** (`src/lib/repositories/`)
4. **Server Actions ã®ä½œæˆ** (`src/actions/`)
5. **UI ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ä½œæˆ** (`src/app/(protected)/`)

### ã‚³ãƒ¼ãƒ‰å“è³ª

- TypeScript strict mode æœ‰åŠ¹
- ESLint è¨­å®šæ¸ˆã¿
- Prettier æ¨å¥¨ï¼ˆæœªè¨­å®šï¼‰

## ğŸ“š å‚è€ƒãƒªãƒ³ã‚¯

- [Next.js Documentation](https://nextjs.org/docs)
- [shadcn/ui](https://ui.shadcn.com/)
- [Prisma Documentation](https://www.prisma.io/docs)
- [NextAuth.js v5](https://authjs.dev/)
- [React Hook Form](https://react-hook-form.com/)
- [Zod](https://zod.dev/)

## ğŸ› æ—¢çŸ¥ã®å•é¡Œ

- middleware è­¦å‘Š: Next.js 16 ã§`middleware`ãŒ`proxy`ã«åç§°å¤‰æ›´äºˆå®šï¼ˆå‹•ä½œã«å½±éŸ¿ãªã—ï¼‰

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT

## ğŸ‘¤ ä½œæˆè€…

é–‹ç™ºè€…æƒ…å ±ã‚’ã“ã“ã«è¨˜è¼‰

---

**æœ€çµ‚æ›´æ–°æ—¥**: 2026-01-01
